# =================================================================
# PRODUCTION ENVIRONMENT VARIABLES - INVOICES BACKEND
# =================================================================
# IMPORTANTE: Este archivo debe ser copiado como .env.production y personalizado
# NUNCA versionar el archivo .env.production real en Git
#
# Instrucciones completas: ver FREE_SERVICES_SETUP.md
# =================================================================

# =================================================================
# JWT CONFIGURATION
# =================================================================
# Generar con: openssl rand -base64 64 | tr -d '\n'
JWT_SECRET=CHANGE_ME_generate_with_openssl_rand_base64_64_minimum_64_chars
JWT_EXPIRATION_MS=3600000
JWT_ISSUER=invoices-backend

# =================================================================
# CORS (Frontend URLs permitidas - Vercel)
# =================================================================
CORS_ALLOWED_ORIGINS=https://invoices-frontend-vert.vercel.app,https://*.vercel.app
CORS_ALLOWED_METHODS=GET,POST,PUT,DELETE,OPTIONS,PATCH
CORS_MAX_AGE=3600

# =================================================================
# NEON POSTGRESQL - Connection Strings (Serverless)
# =================================================================
# Obtener de: https://console.neon.tech/
# Formato: postgresql://user:password@host/database?sslmode=require
#
# Crear 4 databases en Neon:
# - userdb
# - invoicedb
# - documentdb
# - tracedb

USER_DB_URL=postgresql://neondb_owner:YOUR_PASSWORD@ep-xxx.eu-west-2.aws.neon.tech/userdb?sslmode=require&channel_binding=require
INVOICE_DB_URL=postgresql://neondb_owner:YOUR_PASSWORD@ep-xxx.eu-west-2.aws.neon.tech/invoicedb?sslmode=require&channel_binding=require
DOCUMENT_DB_URL=postgresql://neondb_owner:YOUR_PASSWORD@ep-xxx.eu-west-2.aws.neon.tech/documentdb?sslmode=require&channel_binding=require
TRACE_DB_URL=postgresql://neondb_owner:YOUR_PASSWORD@ep-xxx.eu-west-2.aws.neon.tech/tracedb?sslmode=require&channel_binding=require

# =================================================================
# CLOUDFLARE R2 (S3-Compatible Storage)
# =================================================================
# Setup: https://dash.cloudflare.com/
# Dashboard → R2 → Create bucket: "invoices-documents"
# Manage R2 API Tokens → Create API Token
#
# FREE TIER: 10 GB storage + 1M uploads/month + unlimited downloads

R2_ENDPOINT=https://YOUR_ACCOUNT_ID.r2.cloudflarestorage.com
R2_ACCESS_KEY_ID=YOUR_R2_ACCESS_KEY_ID
R2_SECRET_ACCESS_KEY=YOUR_R2_SECRET_ACCESS_KEY
R2_BUCKET_NAME=invoices-documents
R2_REGION=auto

# =================================================================
# UPSTASH KAFKA (Serverless Event Streaming)
# =================================================================
# Setup: https://console.upstash.com/
# Create Kafka Cluster: "invoices-events"
# Region: eu-west-1 (Ireland - closest to Amsterdam)
# Type: Single Replica (free tier)
#
# FREE TIER: 10,000 messages/day
#
# Crear 3 topics en Upstash:
# - invoice-events (Partitions: 1, Retention: 7 days)
# - user-events (Partitions: 1, Retention: 7 days)
# - audit-trail (Partitions: 1, Retention: 30 days)

# Kafka Connection
KAFKA_BOOTSTRAP_SERVERS=ruling-lemur-12345-eu1-kafka.upstash.io:9092
KAFKA_USERNAME=YOUR_UPSTASH_USERNAME
KAFKA_PASSWORD=YOUR_UPSTASH_PASSWORD
KAFKA_SECURITY_PROTOCOL=SASL_SSL
KAFKA_SASL_MECHANISM=SCRAM-SHA-256

# Kafka Topics
KAFKA_TOPIC_INVOICE_EVENTS=invoice-events
KAFKA_TOPIC_USER_EVENTS=user-events
KAFKA_TOPIC_AUDIT_TRAIL=audit-trail
KAFKA_TRACE_GROUP_ID=trace-group

# =================================================================
# EUREKA (Opcional - Deshabilitado en Fly.io)
# =================================================================
EUREKA_CLIENT_ENABLED=false
EUREKA_USERNAME=eureka-admin
EUREKA_PASSWORD=not-used-in-production

# =================================================================
# LOGGING
# =================================================================
LOG_LEVEL_ROOT=INFO
LOG_LEVEL_APP=DEBUG

# =================================================================
# SPRING PROFILES
# =================================================================
SPRING_PROFILES_ACTIVE=prod

# =================================================================
# DEPLOYMENT INFO
# =================================================================
# Fly.io Apps:
# - invoices-backend (Gateway)
# - invoices-user-service
# - invoices-invoice-service
# - invoices-document-service
# - invoices-trace-service
#
# Region: ams (Amsterdam, Netherlands)
# Free tier: Consumption-based pricing (muy bajo para 2 usuarios)
# =================================================================
