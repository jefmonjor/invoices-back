# Production configuration
spring:
  config:
    activate:
      on-profile: prod
  
  # WebSocket configuration
  websocket:
    allowed-origins: ${ALLOWED_ORIGINS:https://yourdomain.com}

  # Memory Optimization: DB Pool
  datasource:
    hikari:
      maximum-pool-size: 5  # Default is 10. 5 is enough for this traffic and saves RAM.
      minimum-idle: 2
      idle-timeout: 300000
      connection-timeout: 20000
      max-lifetime: 1200000

# Disable Swagger UI in production (security best practice)
springdoc:
  swagger-ui:
    enabled: false
  api-docs:
    enabled: false

# VeriFactu AEAT Production Endpoint
verifactu:
  mode: PRODUCTION
  keystore:
    path: ${VERIFACTU_KEYSTORE_PATH:/app/keystore.jks}
    password: ${VERIFACTU_KEYSTORE_PASSWORD}
    alias: ${VERIFACTU_KEYSTORE_ALIAS:verifactu}
  aeat:
    endpoint-production: https://www2.agenciatributaria.gob.es/wlpl/TIKE-CONT/ws/SuministroInformacion
    timeout: 30000

# Logging
logging:
  level:
    root: INFO
    com.invoices: INFO
    org.springframework.web: WARN
    org.hibernate: WARN

# Memory Optimization: Limit Thread & Connection Pools
server:
  tomcat:
    threads:
      max: 50        # Default is 200. Reducing to 50 saves ~75MB stack memory.
      min-spare: 5
    connection-timeout: 20000
    max-connections: 1000
